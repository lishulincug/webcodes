<!DOCTYPE html>
<title>Test createImageBitmap() performance with VideoFrame from VideoDecoder</title>
<script src="runner.js"></script>
<script src="videoFrame-utils.js"></script>
<script src="createImageBitmap-test.js"></script>

<script>
(async function() {
  let hevc =[
  "hvc1.1.6.L93.B0",
  "hvc1.A1.6.L93.B0",
  "hvc1.B1.6.L93.B0",
  "hvc1.C1.6.L93.B0",
  "hvc1.D1.6.L93.B0",
  "hvc1.0.6.L93.B0",
  "hvc1.31.6.L93.B0",
  "hvc1.1.6.L93.B0",
  "hvc1.1.0.L93.B0",
  "hvc1.0.6.L93.B0",
  "hvc1.2.4.L93.B0",
  "hvc1.2.0.L93.B0",
  "hvc1.0.4.L93.B0",
  "hvc1.2.0.L93.B0",
  "hvc1.0.4.L93.B0",
  "hvc1.3.E.L93.B0",
  "hvc1.0.E.L93.B0",
  "hvc1.3.0.L93.B0", 
  "hvc1.4.10.L93.B0",
  "hvc1.4.0.L93.B0",
  "hvc1.0.10.L93.B0",
  "hvc1.5.20.L93.B0",
  "hvc1.5.0.L93.B0",
  "hvc1.0.20.L93.B0", 
  "hvc1.6.40.L93.B0",
  "hvc1.6.0.L93.B0",
  "hvc1.0.40.L93.B0",
  "hvc1.7.80.L93.B0",
  "hvc1.7.0.L93.B0",
  "hvc1.0.80.L93.B0",
  "hvc1.8.100.L93.B0",
  "hvc1.8.0.L93.B0",
  "hvc1.0.100.L93.B0",
  "hvc1.9.200.L93.B0",
  "hvc1.9.0.L93.B0",
  "hvc1.0.200.L93.B0",
  "hvc1.10.400.L93.B0",
  "hvc1.10.0.L93.B0",
  "hvc1.0.400.L93.B0",
  "hvc1.11.800.L93.B0",
  "hvc1.11.0.L93.B0",
  "hvc1.0.800.L93.B0",
  "hvc1.12.1000.L93.B0",
  "hvc1.12.0.L93.B0",
  "hvc1.0.1000.L93.B0",
  "hvc1.-1.6.L93.B0",
  "hvc1.32.6.L93.B0",
  "hvc1.999.6.L93.B0",
  "hvc1.A.6.L93.B0",
  "hvc1.1F.6.L93.B0",
  "hvc1.1.0.L93.B0",
  "hvc1.1.FF.L93.B0",
  "hvc1.1.FFFF.L93.B0",
  "hvc1.1.FFFFFFFF.L93.B0",
  "hvc1.1.100000000.L93.B0",
  "hvc1.1.FFFFFFFFF.L93.B0",
  "hvc1.1.-1.L93.B0",
  "hvc1.1.0G.L93.B0",
  "hvc1.1.6.L93.B0",
  "hvc1.1.0.H93.B0", 
  "hvc1.1.0.93.B0",
  "hvc1.1.0.A93.B0",
  "hvc1.1.6.L0.B0",
  "hvc1.1.6.L1.B0", 
  "hvc1.1.6.L93.B0", 
  "hvc1.1.6.L150.B0",
  "hvc1.1.6.L255.B0",
  "hvc1.1.6.L256.B0",
  "hvc1.1.6.L999.B0",
  "hvc1.1.6.L-1.B0", 
  "hvc1.1.6.L0.0.0.0.0.0.0",
  "hvc1.1.6.L0.00.00.00.00.00.00",
  "hvc1.1.6.L0.12",
  "hvc1.1.6.L0.12.34.56",
  "hvc1.1.6.L0.12.34.56.78.9A.BC", 
  "hvc1.1.6.L0.FF.FF.FF.FF.FF.FF",
  "hvc1.1.6.L0.FF.FF.FF.FF.FF.FF.0",
  "hvc1.1.6.L0.100",
  "hvc1.1.6.L0.1FF",
  "hvc1.1.6.L0.-1",
  'avc1.64001f',
]
// hevc.map( async ic=>{
//   try {  
//     config.codec=ic
//     decoder.configure(config)
//     console.log("Frame decoded" , ic);
//   }
//   catch (e) {
//     console.log(e)
//       return;
//   } 
// })
hevc.map( async ic=>{
  try {
    let frame = await createDecodedFrame(ic);
    if (frame == null) {
      PerfTestRunner.logFatalError("No frame decoded");
      return;
    }
    console.log("Frame decoded" , ic);
    runCreateImageBitmapTest(
        frame, "CPU time for createImageBitmap w/ VideoFrame from VideoDecoder");

  }catch (e) {
      // on_error();
      return;
  }

})
  })();
</script>
